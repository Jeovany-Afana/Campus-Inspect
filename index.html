<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Inspect</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
   
    <div id="navbar">
    </div>

    <div class="class-card">
        <img src="classe.jpg" alt="Image de la classe" class="class-image">
        <div class="class-info">
            <h2>Salle 4</h2>
            <p><strong>Capacité :</strong> 30 étudiants</p>
            <p><strong>Équipements Disponibles :</strong> Projecteur, Tableau Blanc, Ordinateur</p>
            <p><strong>Statut d'Occupation :</strong> Occupée</p>
            <p><strong>Horaires d'Occupation :</strong> 8h - 16h</p>
            <p><strong>Localisation :</strong> 2ème étage, Bâtiment A</p>
            <p><strong>Responsable :</strong> Professeur Dupont</p>
            <p><strong>Prochaines Réservations :</strong> 10h - 12h, 14h - 16h</p>
        </div>
    </div>

    <input type="file" id="fileInput" />
    <button id="uploadButton">Upload</button>

    <div id="footer"></div>
    <script src="/assets/loadHTML.js"></script>
    <script type="module">
// Importer les fonctions nécessaires depuis les SDK de Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js"; // Pour initialiser l'application Firebase
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-analytics.js"; // Pour les analyses
import { getFirestore } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js"; // Pour utiliser Firestore
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-storage.js"; // Pour utiliser Storage

// Configuration de votre application Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDibbuBJ2p88T26P0BAB-o_exunK0GYFdA", // Clé API de votre projet
  authDomain: "inspecteur-de-classes.firebaseapp.com", // Domaine d'authentification
  projectId: "inspecteur-de-classes", // ID de votre projet
  storageBucket: "inspecteur-de-classes.appspot.com", // Bucket de stockage pour les fichiers
  messagingSenderId: "572661846292", // ID de l'expéditeur de messages
  appId: "1:572661846292:web:aeb0374db2d414fef9f201", // ID de votre application
  measurementId: "G-NVN5GERDV6" // ID de mesure pour les analyses
};

// Initialiser Firebase avec la configuration fournie
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app); // Initialiser les analyses

// Initialiser Firestore (base de données de Firebase)
const db = getFirestore(app); // Maintenant, Firestore est prêt à être utilisé

// Initialiser Firebase Storage (pour stocker des fichiers)
const storage = getStorage(app); // Utilisez getStorage pour initialiser le stockage

// Fonction pour télécharger un fichier
async function uploadFile(file) {
  // Créer une référence au lieu où le fichier sera stocké
  const fileRef = ref(storage, 'uploads/' + file.name); // Référence au fichier avec son nom

  try {
    // Télécharger le fichier à l'emplacement spécifié
    const snapshot = await uploadBytes(fileRef, file); // Mettre le fichier dans le stockage
    console.log('Uploaded a file!', snapshot); // Afficher un message de succès
    
    // Obtenir l'URL du fichier téléchargé
    const downloadURL = await getDownloadURL(fileRef); // Récupérer l'URL pour accéder au fichier
    console.log('File available at', downloadURL); // Afficher l'URL dans la console
  } catch (error) {
    console.error('Upload failed:', error); // Afficher une erreur si le téléchargement échoue
  }
}

// Ajouter un écouteur d'événements pour le bouton de téléchargement
document.getElementById('uploadButton').addEventListener('click', () => {
  // Obtenir l'élément d'entrée de fichier
  const fileInput = document.getElementById('fileInput'); 
  const file = fileInput.files[0]; // Récupérer le premier fichier sélectionné

  // Vérifier si un fichier a été sélectionné
  if (file) {
    uploadFile(file); // Appeler la fonction pour télécharger le fichier
  } else {
    console.error('No file selected!'); // Afficher un message d'erreur si aucun fichier n'est sélectionné
  }
});

      </script>

      <script src="/assets/humbergerButton.js"></script>
      <!-- <script type="module" src="index.js"></script> -->
</body>
</html>