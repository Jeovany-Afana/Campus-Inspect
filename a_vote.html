<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vote ‚Äî Ouverture dans‚Ä¶</title>
    <style>
        :root{
            --bg1:#070a1a; --bg2:#0b1230;
            --glass: rgba(255,255,255,.08);
            --stroke: rgba(255,255,255,.14);
            --txt: rgba(255,255,255,.95);
            --muted: rgba(255,255,255,.72);
            --muted2: rgba(255,255,255,.55);
            --a:#4f46e5; --b:#f5a71c; --c:#10b981; --d:#ec4899;
            --radius: 22px;
            --shadow: 0 18px 60px rgba(0,0,0,.55);
        }

        *{box-sizing:border-box;margin:0;padding:0}
        body{
            min-height:100vh;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
            color:var(--txt);
            background:
                    radial-gradient(900px 600px at 15% 10%, rgba(79,70,229,.35), transparent 55%),
                    radial-gradient(900px 600px at 90% 90%, rgba(245,167,28,.20), transparent 55%),
                    radial-gradient(800px 500px at 60% 40%, rgba(16,185,129,.14), transparent 55%),
                    linear-gradient(135deg, var(--bg1), var(--bg2));
            overflow-x:hidden;
        }

        /* Canvas confetti */
        #confetti{
            position:fixed; inset:0;
            width:100%; height:100%;
            pointer-events:none;
            z-index: 999;
        }

        /* Wrapper */
        .wrap{
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding: 16px;
        }

        /* Card */
        .card{
            width:min(560px, 100%);
            background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
            border: 1px solid var(--stroke);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(16px);
            overflow:hidden;
            position:relative;
            transform: translateZ(0);
        }

        /* Moving border glow */
        .card::before{
            content:"";
            position:absolute; inset:-2px;
            background: conic-gradient(from 0deg, var(--a), var(--b), var(--c), var(--d), var(--a));
            filter: blur(14px);
            opacity:.55;
            animation: spin 6s linear infinite;
            z-index:0;
        }
        .card::after{
            content:"";
            position:absolute; inset:1px;
            background: linear-gradient(135deg, rgba(0,0,0,.35), rgba(0,0,0,.20));
            border-radius: calc(var(--radius) - 1px);
            z-index:1;
        }

        @keyframes spin{to{transform:rotate(360deg)}}

        .inner{
            position:relative;
            z-index:2;
            padding: 18px;
            display:flex;
            flex-direction:column;
            gap: 14px;
        }

        .top{
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap: 10px;
        }

        .badge{
            display:inline-flex;
            align-items:center;
            gap:8px;
            padding: 8px 12px;
            border-radius:999px;
            background: rgba(0,0,0,.35);
            border:1px solid rgba(255,255,255,.12);
            color: var(--muted);
            font-size: 12px;
            font-weight: 700;
            letter-spacing:.6px;
            text-transform: uppercase;
            white-space:nowrap;
        }
        .badge i{
            width:8px;height:8px;border-radius:50%;
            background: var(--b);
            box-shadow: 0 0 14px rgba(245,167,28,.8);
            animation:pulse 1.4s ease-in-out infinite;
        }
        @keyframes pulse{50%{transform:scale(1.35); opacity:.7}}

        h1{
            font-size: clamp(18px, 4.6vw, 26px);
            line-height: 1.1;
            letter-spacing: -0.4px;
            font-weight: 900;
            margin-top: 2px;
        }
        .sub{
            color: var(--muted);
            font-size: 13px;
            line-height: 1.35;
        }
        .sub b{color:var(--txt)}

        /* Countdown */
        .countdown{
            background: rgba(255,255,255,.06);
            border:1px solid rgba(255,255,255,.10);
            border-radius: 18px;
            padding: 14px 12px;
            display:flex;
            flex-direction:column;
            gap: 10px;
            position:relative;
            overflow:hidden;
        }
        .countdown::before{
            content:"";
            position:absolute; inset:0;
            background: radial-gradient(500px 180px at 30% 0%, rgba(0,243,255,.12), transparent 60%);
            opacity:.9;
            pointer-events:none;
        }

        .row{
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap: 10px;
            position:relative;
            z-index:1;
        }
        .label{
            font-size: 12px;
            color: var(--muted2);
        }
        .target{
            font-size: 12px;
            color: var(--muted);
            text-align:right;
        }

        .boxes{
            display:flex;
            gap: 8px;
            justify-content:space-between;
            position:relative;
            z-index:1;
        }
        .box{
            flex:1;
            min-width: 70px;
            background: rgba(0,0,0,.35);
            border:1px solid rgba(255,255,255,.12);
            border-radius: 16px;
            padding: 10px 8px;
            text-align:center;
            position:relative;
            overflow:hidden;
        }
        .box::after{
            content:"";
            position:absolute; inset:-40px -60px auto auto;
            width:120px;height:120px;border-radius:50%;
            background: radial-gradient(circle, rgba(79,70,229,.25), transparent 70%);
            filter: blur(0px);
            opacity:.9;
        }
        .num{
            font-variant-numeric: tabular-nums;
            font-weight: 1000;
            letter-spacing: -1px;
            font-size: clamp(22px, 7vw, 34px);
            line-height: 1;
            background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(200,200,255,.78));
            -webkit-background-clip:text;
            background-clip:text;
            color:transparent;
            text-shadow: 0 0 24px rgba(0,243,255,.16);
            transform: translateZ(0);
        }
        .unit{
            margin-top: 6px;
            font-size: 11px;
            color: var(--muted2);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        /* Candidates */
        .cands{
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .cand{
            background: rgba(255,255,255,.06);
            border:1px solid rgba(255,255,255,.10);
            border-radius: 18px;
            padding: 12px;
            overflow:hidden;
            position:relative;
        }
        .cand::before{
            content:"";
            position:absolute; inset:0;
            background: radial-gradient(340px 160px at 30% 0%, rgba(236,72,153,.12), transparent 60%);
            opacity:.9;
            pointer-events:none;
        }
        .avatar{
            width: 54px; height: 54px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,.18);
            background: rgba(0,0,0,.25);
            overflow:hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,.35);
            flex:0 0 auto;
        }
        .avatar img{
            width:100%; height:100%;
            object-fit: cover;
            display:block;
        }
        .candTop{
            display:flex;
            gap: 10px;
            align-items:center;
            position:relative;
            z-index:1;
        }
        .candName{
            font-weight: 900;
            font-size: 14px;
            line-height: 1.1;
        }
        .candTag{
            margin-top: 2px;
            font-size: 11px;
            color: var(--muted2);
            letter-spacing: .6px;
            text-transform: uppercase;
        }
        .slogan{
            margin-top: 10px;
            font-size: 12px;
            color: var(--muted);
            line-height: 1.35;
            position:relative;
            z-index:1;
        }
        .slogan b{color:var(--txt)}

        /* Button */
        .actions{
            display:flex;
            gap: 10px;
            margin-top: 4px;
        }
        .btn{
            flex:1;
            border:none;
            cursor:pointer;
            padding: 12px 12px;
            border-radius: 16px;
            font-weight: 900;
            letter-spacing: .6px;
            text-transform: uppercase;
            font-size: 12px;
            transition: transform .12s ease, filter .12s ease;
        }
        .btn:active{transform:scale(.98)}
        .btnPrimary{
            color: #fff;
            background: linear-gradient(135deg, var(--a), #a855f7);
            box-shadow: 0 12px 40px rgba(79,70,229,.35);
        }
        .btnGhost{
            color: var(--txt);
            background: rgba(255,255,255,.06);
            border:1px solid rgba(255,255,255,.14);
        }

        /* Small footer text */
        .foot{
            text-align:center;
            color: var(--muted2);
            font-size: 12px;
            line-height: 1.35;
        }

        /* Mobile adjustments */
        @media (max-width: 420px){
            .inner{padding: 16px}
            .cands{grid-template-columns: 1fr; }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce){
            .card::before{animation:none}
            .badge i{animation:none}
        }
    </style>
</head>
<body>

<canvas id="confetti"></canvas>

<div class="wrap">
    <div class="card" role="dialog" aria-modal="true" aria-label="Vote pas encore ouvert">
        <div class="inner">
            <div class="top">
                <div>
                    <div class="badge"><i></i> Vote pas encore ouvert</div>
                    <h1>üó≥Ô∏è Campus Vote ‚Äî <span style="color:rgba(245,167,28,.95)">pr√©pare-toi</span> !</h1>
                    <p class="sub">
                        Reviens √† l‚Äôheure exacte pour voter. <b>Ton choix compte.</b> üî•
                    </p>
                </div>
            </div>

            <section class="countdown" aria-label="Compte √† rebours">
                <div class="row">
                    <div class="label">Ouverture dans :</div>
                    <div class="target" id="targetText">‚Äî</div>
                </div>

                <div class="boxes">
                    <div class="box">
                        <div class="num" id="d">00</div>
                        <div class="unit">jours</div>
                    </div>
                    <div class="box">
                        <div class="num" id="h">00</div>
                        <div class="unit">heures</div>
                    </div>
                    <div class="box">
                        <div class="num" id="m">00</div>
                        <div class="unit">min</div>
                    </div>
                    <div class="box">
                        <div class="num" id="s">00</div>
                        <div class="unit">sec</div>
                    </div>
                </div>
            </section>

            <section class="cands" aria-label="Candidats">
                <article class="cand">
                    <div class="candTop">
                        <div class="avatar">
                            <img src="./cand1.jpg" alt="Candidat 1" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2754%27 height=%2754%27%3E%3Crect width=%2754%27 height=%2754%27 rx=%2716%27 fill=%27%234f46e5%27/%3E%3Ctext x=%2727%27 y=%2734%27 text-anchor=%27middle%27 font-size=%2720%27 fill=%27white%27 font-family=%27Arial%27%3EA%3C/text%3E%3C/svg%3E'">
                        </div>
                        <div>
                            <div class="candName" id="c1Name">Awa Ndiaye</div>
                            <div class="candTag" id="c1Tag">Candidat #1</div>
                        </div>
                    </div>
                    <p class="slogan" id="c1Slogan">¬´ <b>Un campus plus fort</b>, une voix pour chacun. ¬ª ‚ú®</p>
                </article>

                <article class="cand">
                    <div class="candTop">
                        <div class="avatar">
                            <img src="./cand2.jpg" alt="Candidat 2" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2754%27 height=%2754%27%3E%3Crect width=%2754%27 height=%2754%27 rx=%2716%27 fill=%27%23f5a71c%27/%3E%3Ctext x=%2727%27 y=%2734%27 text-anchor=%27middle%27 font-size=%2720%27 fill=%27white%27 font-family=%27Arial%27%3EB%3C/text%3E%3C/svg%3E'">
                        </div>
                        <div>
                            <div class="candName" id="c2Name">Bamba Sarr</div>
                            <div class="candTag" id="c2Tag">Candidat #2</div>
                        </div>
                    </div>
                    <p class="slogan" id="c2Slogan">¬´ <b>Transparence & action</b>, d√®s maintenant. ¬ª üî•</p>
                </article>
            </section>

            <div class="actions">
                <button class="btn btnPrimary" id="btnCheck">Je v√©rifie mon compte</button>
                <button class="btn btnGhost" id="btnCopy">Copier l‚Äôhoraire</button>
            </div>

            <p class="foot" id="foot">
                üí° Astuce : connecte-toi avant l‚Äôouverture pour voter en 10 secondes.
            </p>
        </div>
    </div>
</div>

<script>
    /* =========================
       1) R√©glages rapides ici
       ========================= */
    const config = {
        // Si tu veux fixer une date pr√©cise :
        // openAt: new Date("2025-12-20T11:00:00"),
        // Sinon (par d√©faut) : demain √† 11:00
        openAt: null,
        closeHour: 16,           // juste pour texte (pas obligatoire)
        loginUrl: "./login/index.html",
        emojis: ["üéâ","‚ú®","üó≥Ô∏è","üî•","üéä","‚≠êÔ∏è"]
    };

    /* =========================
       2) Countdown
       ========================= */
    const $ = (id) => document.getElementById(id);
    const el = { d:$("d"), h:$("h"), m:$("m"), s:$("s"), target:$("targetText"), foot:$("foot") };

    const pad2 = (n) => String(Math.max(0, n)).padStart(2,"0");

    function formatFR(date){
        try{
            return new Intl.DateTimeFormat("fr-FR", {
                weekday:"long", day:"2-digit", month:"long", hour:"2-digit", minute:"2-digit"
            }).format(date);
        }catch(e){
            return date.toLocaleString();
        }
    }

    function computeDefaultOpen(){
        const now = new Date();
        const t = new Date(now);
        t.setDate(t.getDate()+1);
        t.setHours(11,0,0,0);
        return t;
    }

    const openAt = config.openAt instanceof Date ? config.openAt : computeDefaultOpen();
    const closeAt = new Date(openAt);
    closeAt.setHours(config.closeHour, 0, 0, 0);

    el.target.textContent = formatFR(openAt) + ` (cr√©neau ${pad2(openAt.getHours())}h‚Äì${pad2(closeAt.getHours())}h)`;

    let did60=false, did10=false, did0=false;

    function tick(){
        const now = new Date();
        const diff = openAt - now;

        if (diff <= 0){
            el.d.textContent = "00";
            el.h.textContent = "00";
            el.m.textContent = "00";
            el.s.textContent = "00";

            if(!did0){
                did0 = true;
                burstConfetti(220);
                el.foot.textContent = "üéâ C‚Äôest l‚Äôheure ! Si l‚Äôadmin ouvre, tu peux voter maintenant.";
            }
            return;
        }

        const total = Math.floor(diff/1000);
        const days = Math.floor(total / (3600*24));
        const hours = Math.floor((total % (3600*24)) / 3600);
        const mins = Math.floor((total % 3600) / 60);
        const secs = total % 60;

        el.d.textContent = pad2(days);
        el.h.textContent = pad2(hours);
        el.m.textContent = pad2(mins);
        el.s.textContent = pad2(secs);

        if(total <= 60 && !did60){
            did60 = true;
            burstConfetti(80);
            el.foot.textContent = "‚è≥ Plus qu‚Äô1 minute‚Ä¶ pr√©pare-toi !";
        }
        if(total <= 10 && !did10){
            did10 = true;
            burstConfetti(120);
            el.foot.textContent = "üî• 10 secondes‚Ä¶ LET‚ÄôS GO !";
            if(navigator.vibrate) navigator.vibrate([80,40,80]);
        }
    }

    setInterval(tick, 1000);
    tick();

    /* =========================
       3) Confetti emojis (canvas)
       ========================= */
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    const DPR = Math.min(window.devicePixelRatio || 1, 2);

    function resize(){
        canvas.width = Math.floor(innerWidth * DPR);
        canvas.height = Math.floor(innerHeight * DPR);
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        ctx.setTransform(DPR,0,0,DPR,0,0);
    }
    window.addEventListener("resize", resize, {passive:true});
    resize();

    const parts = [];

    function burstConfetti(n=120){
        const centerX = innerWidth/2;
        const y = innerHeight * 0.2;

        for(let i=0;i<n;i++){
            const emoji = config.emojis[(Math.random()*config.emojis.length)|0];
            const a = Math.random() * Math.PI * 2;
            const sp = 2 + Math.random()*7;
            parts.push({
                x:centerX + (Math.random()*60-30),
                y:y + (Math.random()*20-10),
                vx: Math.cos(a)*sp,
                vy: Math.sin(a)*sp - (3 + Math.random()*3),
                g: 0.12 + Math.random()*0.08,
                r: Math.random()*Math.PI*2,
                vr:(Math.random()-0.5)*0.18,
                life: 80 + (Math.random()*40|0),
                size: 16 + (Math.random()*16|0),
                emoji
            });
        }
    }

    function draw(){
        ctx.clearRect(0,0,innerWidth, innerHeight);
        for(let i=parts.length-1;i>=0;i--){
            const p = parts[i];
            p.life--;
            p.x += p.vx;
            p.y += p.vy;
            p.vy += p.g;
            p.r += p.vr;
            p.vx *= 0.985;
            p.vy *= 0.985;

            const alpha = Math.max(0, p.life/120);
            ctx.save();
            ctx.globalAlpha = alpha;
            ctx.translate(p.x, p.y);
            ctx.rotate(p.r);
            ctx.font = `${p.size}px system-ui`;
            ctx.fillText(p.emoji, -p.size/2, p.size/2);
            ctx.restore();

            if(p.life <= 0 || p.y > innerHeight + 40) parts.splice(i,1);
        }
        requestAnimationFrame(draw);
    }
    draw();

    // petit effet au chargement (light)
    setTimeout(() => burstConfetti(50), 400);

    /* =========================
       4) Boutons
       ========================= */
    document.getElementById("btnCheck").addEventListener("click", () => {
        window.location.href = config.loginUrl;
    });

    document.getElementById("btnCopy").addEventListener("click", async () => {
        const text = `Campus Vote ‚Äî ouverture : ${formatFR(openAt)} (cr√©neau ${pad2(openAt.getHours())}h‚Äì${pad2(closeAt.getHours())}h).`;
        try{
            await navigator.clipboard.writeText(text);
            burstConfetti(60);
            el.foot.textContent = "üìã Horaire copi√© ! √Ä tout √† l‚Äôheure.";
        }catch(e){
            burstConfetti(40);
            el.foot.textContent = "üìã Copie manuelle : " + text;
        }
    });
</script>

</body>
</html>
